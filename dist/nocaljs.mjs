const e=e=>new Promise(t=>setTimeout(t,e)),t=e=>Promise.resolve().then(e),n=(e,...t)=>e.raw.reduce((e,n,o)=>e+n+(t[o]||""),""),o=(e,t=document)=>{const n=(t.shadowRoot??t).querySelectorAll(e);return new Proxy(n,{get(e,t,n){const o={css:(e,t,n)=>e.style[t]=n,on:(e,t,n)=>e.addEventListener(t,n),attr:(e,t,n)=>e.setAttribute(t,n),html:(e,t)=>e.innerHTML=t,text:(e,t)=>e.textContent=t};return o[t]?(r=o[t],(...t)=>(e.forEach(e=>r(e,...t)),e)):(...n)=>Array.from(e,e=>"function"==typeof e[t]?e[t].apply(e,n):e[t]);var r},set:(e,t,n)=>(e.forEach(e=>e[t]=n),!0)})},r=new Map,s=new Set,c=[],u=[];function a(){let e=null,t=0,n=[];const o=(...o)=>(e=o,new Proxy({},{get:(o,r)=>n[t]=l(e[t++])}));return o.reset=()=>{n.forEach((t,n)=>t.value=e[n])},o}function l(e){return new Proxy({value:e,oldValue:null},{get:(e,t,n)=>"__isState"===t||("value"===t&&function(e){0!==u.length&&c[c.length-1].add(e)}(e),Reflect.get(e,t,n)),set(e,n,o,c){if("value"===n&&e.value!==o){e.oldValue=e.value;const u=Reflect.set(e,n,o,c);return function(e){if(r.has(e)){const t=r.get(e);for(const e of t)s.add(e)}t(()=>{for(const e of s)e();s.clear()})}(e),u}return Reflect.set(e,n,o,c)}})}function i(e){const t=new Set;c.push(t),u.push(e),e();for(const n of t)r.has(n)||r.set(n,new Set),r.get(n).add(e);u.pop(),c.pop()}function f(e){const t=l(e());return i(n=>t.value=e()),t}async function d(e){return new Promise(t=>{const n=e.value;i(o=>e.value!==n&&t(e.value))})}async function h(e,t){return new Promise(n=>{i(o=>t(e.value)&&n(e.value))})}const p=Object.getPrototypeOf,m=p({}),w=p(function(){}),v=p(async function(){}),y=e=>[w,v].includes(p(e??0)),g=e=>!!e?.nodeType,b=e=>!!e?.__isState;function E(e){return g(e)?e:y(e)?E(e()):document.createTextNode(e)}function j(e,...t){function n(e){return null===e?null:g(e)?e:document.createTextNode(e)}for(let o of t.flat(1/0))if(b(o)){let t=n(o.value);i(()=>{const e=n(o.value);null===e?t.remove():t.replaceWith(e),t=e}),e.appendChild(t)}else if(y(o)){let t=n(o());i(()=>{const e=n(o());null===e?t.remove():t.replaceWith(e),t=e}),e.appendChild(t)}else e.appendChild(E(o));return e}function x(e){return new Proxy({},{get:(t,n)=>(...t)=>{const[o,...r]=(s=t[0],p(s??0)!==m||b(t[0])?[{},...t]:t);var s;const c=e?document.createElementNS(e,n):document.createElement(n);for(let[e,t]of Object.entries(o))y(t)&&e.startsWith("on")?c.addEventListener(e.slice(2).toLowerCase(),t):y(t)?i(()=>{c.setAttribute(e,t(c,e))}):b(t)?i(()=>{c.setAttribute(e,t.value)}):c.setAttribute(e,t);return j(c,r)}})}function P(e){return document.createRange().createContextualFragment(e)}function A(e,t,n){n??=e=>"404: not found";const o=e=>e.match(/[^:/]+/g),r=r=>{const s=o(window.location.hash||e[0][0]),[c,u]=e.find(([e])=>o(e)[0]===s?.[0])??["#notfound",n],a=o(c),l=Object.fromEntries(a.slice(1).map((e,t)=>[e,s[t+1]]));(t??document.body).replaceChildren(u(l))};window.addEventListener("hashchange",r),r()}const C={json(){const e=t=>{if(null==t)return t;if(Array.isArray(t)){const n=[];for(let o=0;o<t.length;++o)n[o]=e(t[o]);return n}if(t.__isState)return e(t.value);if("object"==typeof t){const n={};for(const[o,r]of Object.entries(t))n[o]=e(r);return n}return t};return e(this)}};function O(e){if("object"!=typeof e||null===e)throw new Error("model: argument must be an object");const t=function e(t,n=""){const o={};if(Array.isArray(t))return l(t);for(const r in t)if(t.hasOwnProperty(r)){const s=n?`${n}.${r}`:r,c=t[r];if("object"==typeof c&&null!==c){const t=e(c,s);o[r]=l(t)}else o[r]=l(c)}return o}(e,"");return Object.setPrototypeOf(t,C),t}class S extends HTMLElement{constructor(e,t){super(),this.app=e||(e=>"nothing here"),this.props=t||{},this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){j(this.shadow,this.app(this.props,this.shadow))}}function L(e,t){if(!window.customElements.get(e)){const t=class extends S{};window.customElements.define(e,t)}const n=window.customElements.get(e);return e=>new n(t,e)}const T=new Map;function _(e){const t=Object.entries(e).map(([e,t])=>`${e}:${t}`).join(";");return T.get(t)||T.set(t,t).get(t)}console.log('\n           nocaljs\n            \n             (\\/)\n            ( ..)\n           C(")(")\n           \n       (c) 2024-2025 - JVdB\n');export{o as S,j as add,d as change,L as component,n as css,f as derive,P as html,O as model,A as router,t as schedule,e as sleep,l as state,a as states,_ as style,x as tags,h as until,i as watch};